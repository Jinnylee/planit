app.controller('MembersCtrl', ['$scope', '$routeParams', '$http', function($scope, $routeParams, $http){

  $scope.pending = false;
  $scope.members = [];
  $scope.invitedmembers = {};

  var getMembers = function() {
    $http({
      method: 'GET',
      url: '/trips/' + $routeParams.id + '/members.json'
   }).then(function(resp){
    console.log("showing members!");
    console.log(resp);
    $scope.members = resp.data;
   }, function(resp){
    console.log("error");
    console.log(resp);
   });
  };

  getMembers();

  $scope.addMember = function() {
    $http({
      method:'POST',
      url: '/trips/' + $routeParams.id +'/members.json',
      data: {
        email: $scope.invitedmember
      }
    }).then(function(resp){
      console.log("invited new member")
      getMembers();
      $scope.invitedmembers = {};
    }, function(resp){
      console.log("error");
      console.log(resp);
    });
  };

}]);