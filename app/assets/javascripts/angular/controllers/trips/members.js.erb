app.controller('MembersCtrl', ['$scope', '$location', '$routeParams', '$auth', '$http', function($scope, $location, $routeParams, $auth, $http){

  $scope.pending = false;
  $scope.members = [];
  $scope.invitedmember = {};

  var getMembers = function() {
    $http({
      method: 'GET',
      url: 'http://localhost:3000/trips/' + $routeParams.trip_id + '/members.json'
   }).then(function(resp){
    console.log("showing members!");
    console.log(resp);
    $scope.members = resp.data;
   }, function(resp){
    console.log("error");
    console.log(resp);
   });
  };

  getMembers();

  $scope.addMember = function() {
    $http({
      method:'POST',
      url: 'http://localhost:3000/trips/' + $routeParams.trip_id +'/members.json',
      data: {
        email: $scope.invitedmember
      }
    }).then(function(resp){
      console.log("invited new member")
      getMembers();
      $scope.invitedmember = {};
    }, function(resp){
      console.log("error");
      console.log(resp);
    });
  };

}]);